# yaml-language-server: $schema=https://azuremlsdk2.blob.core.windows.net/latest/commandJob.schema.json

experiment_name: azuremlv2

command: python train.py trainer.gpus=-1 +trainer.accelerator=mpi

code:
  directory: .

environment:
  name: hydra-pl
  version: 2
  conda_file: environment.yml
  docker:
    image: mcr.microsoft.com/azureml/intelmpi2018.3-ubuntu16.04:20201211.v1

distribution:
  type: mpi
  process_count_per_instance: 2

compute:
  target: azureml:gpu-nc12-lowpri
  node_count: 2
